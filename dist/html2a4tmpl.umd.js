(function(T,L){typeof exports=="object"&&typeof module<"u"?module.exports=L():typeof define=="function"&&define.amd?define(L):(T=typeof globalThis<"u"?globalThis:T||self,T.html2a4tmpl=L())})(this,function(){"use strict";const T=document,L=window,wt=T.documentElement,I=T.createElement.bind(T),Ct=I("div"),rt=I("table"),Ut=I("tbody"),xt=I("tr"),{isArray:K,prototype:Tt}=Array,{concat:zt,filter:st,indexOf:$t,map:Et,push:Jt,slice:At,some:ot,splice:Yt}=Tt,Gt=/^#(?:[\w-]|\\.|[^\x00-\xa0])*$/,Xt=/^\.(?:[\w-]|\\.|[^\x00-\xa0])*$/,Kt=/<.+>/,Qt=/^\w+$/;function ut(t,n){const e=Zt(n);return!t||!e&&!B(n)&&!d(n)?[]:!e&&Xt.test(t)?n.getElementsByClassName(t.slice(1).replace(/\\/g,"")):!e&&Qt.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t)}class Q{constructor(n,e){if(!n)return;if(ct(n))return n;let i=n;if(b(n)){const r=e||T;if(i=Gt.test(n)&&B(r)?r.getElementById(n.slice(1).replace(/\\/g,"")):Kt.test(n)?vt(n):ct(r)?r.find(n):b(r)?s(r).find(n):ut(n,r),!i)return}else if(M(n))return this.ready(n);(i.nodeType||i===L)&&(i=[i]),this.length=i.length;for(let r=0,u=this.length;r<u;r++)this[r]=i[r]}init(n,e){return new Q(n,e)}}const o=Q.prototype,s=o.init;s.fn=s.prototype=o,o.length=0,o.splice=Yt,typeof Symbol=="function"&&(o[Symbol.iterator]=Tt[Symbol.iterator]);function ct(t){return t instanceof Q}function W(t){return!!t&&t===t.window}function B(t){return!!t&&t.nodeType===9}function Zt(t){return!!t&&t.nodeType===11}function d(t){return!!t&&t.nodeType===1}function tn(t){return!!t&&t.nodeType===3}function nn(t){return typeof t=="boolean"}function M(t){return typeof t=="function"}function b(t){return typeof t=="string"}function $(t){return t===void 0}function z(t){return t===null}function St(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ft(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}s.isWindow=W,s.isFunction=M,s.isArray=K,s.isNumeric=St,s.isPlainObject=ft;function p(t,n,e){if(e){let i=t.length;for(;i--;)if(n.call(t[i],i,t[i])===!1)return t}else if(ft(t)){const i=Object.keys(t);for(let r=0,u=i.length;r<u;r++){const c=i[r];if(n.call(t[c],c,t[c])===!1)return t}}else for(let i=0,r=t.length;i<r;i++)if(n.call(t[i],i,t[i])===!1)return t;return t}s.each=p,o.each=function(t){return p(this,t)},o.empty=function(){return this.each((t,n)=>{for(;n.firstChild;)n.removeChild(n.firstChild)})};function Z(...t){const n=nn(t[0])?t.shift():!1,e=t.shift(),i=t.length;if(!e)return{};if(!i)return Z(n,s,e);for(let r=0;r<i;r++){const u=t[r];for(const c in u)n&&(K(u[c])||ft(u[c]))?((!e[c]||e[c].constructor!==u[c].constructor)&&(e[c]=new u[c].constructor),Z(n,e[c],u[c])):e[c]=u[c]}return e}s.extend=Z,o.extend=function(t){return Z(o,t)};const en=/\S+/g;function tt(t){return b(t)?t.match(en)||[]:[]}o.toggleClass=function(t,n){const e=tt(t),i=!$(n);return this.each((r,u)=>{d(u)&&p(e,(c,a)=>{i?n?u.classList.add(a):u.classList.remove(a):u.classList.toggle(a)})})},o.addClass=function(t){return this.toggleClass(t,!0)},o.removeAttr=function(t){const n=tt(t);return this.each((e,i)=>{d(i)&&p(n,(r,u)=>{i.removeAttribute(u)})})};function rn(t,n){if(t){if(b(t)){if(arguments.length<2){if(!this[0]||!d(this[0]))return;const e=this[0].getAttribute(t);return z(e)?void 0:e}return $(n)?this:z(n)?this.removeAttr(t):this.each((e,i)=>{d(i)&&i.setAttribute(t,n)})}for(const e in t)this.attr(e,t[e]);return this}}o.attr=rn,o.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr("class","")},o.hasClass=function(t){return!!t&&ot.call(this,n=>d(n)&&n.classList.contains(t))},o.get=function(t){return $(t)?At.call(this):(t=Number(t),this[t<0?t+this.length:t])},o.eq=function(t){return s(this.get(t))},o.first=function(){return this.eq(0)},o.last=function(){return this.eq(-1)};function sn(t){return $(t)?this.get().map(n=>d(n)||tn(n)?n.textContent:"").join(""):this.each((n,e)=>{d(e)&&(e.textContent=t)})}o.text=sn;function R(t,n,e){if(!d(t))return;const i=L.getComputedStyle(t,null);return e?i.getPropertyValue(n)||void 0:i[n]||t.style[n]}function S(t,n){return parseInt(R(t,n),10)||0}function kt(t,n){return S(t,`border${n?"Left":"Top"}Width`)+S(t,`padding${n?"Left":"Top"}`)+S(t,`padding${n?"Right":"Bottom"}`)+S(t,`border${n?"Right":"Bottom"}Width`)}const at={};function on(t){if(at[t])return at[t];const n=I(t);T.body.insertBefore(n,null);const e=R(n,"display");return T.body.removeChild(n),at[t]=e!=="none"?e:"block"}function Rt(t){return R(t,"display")==="none"}function _t(t,n){const e=t&&(t.matches||t.webkitMatchesSelector||t.msMatchesSelector);return!!e&&!!n&&e.call(t,n)}function nt(t){return b(t)?(n,e)=>_t(e,t):M(t)?t:ct(t)?(n,e)=>t.is(e):t?(n,e)=>e===t:()=>!1}o.filter=function(t){const n=nt(t);return s(st.call(this,(e,i)=>n.call(e,i,e)))};function O(t,n){return n?t.filter(n):t}o.detach=function(t){return O(this,t).each((n,e)=>{e.parentNode&&e.parentNode.removeChild(e)}),this};const un=/^\s*<(\w+)[^>]*>/,cn=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Nt={"*":Ct,tr:Ut,td:xt,th:xt,thead:rt,tbody:rt,tfoot:rt};function vt(t){if(!b(t))return[];if(cn.test(t))return[I(RegExp.$1)];const n=un.test(t)&&RegExp.$1,e=Nt[n]||Nt["*"];return e.innerHTML=t,s(e.childNodes).detach().get()}s.parseHTML=vt,o.has=function(t){const n=b(t)?(e,i)=>ut(t,i).length:(e,i)=>i.contains(t);return this.filter(n)},o.not=function(t){const n=nt(t);return this.filter((e,i)=>(!b(t)||d(i))&&!n.call(i,e,i))};function _(t,n,e,i){const r=[],u=M(n),c=i&&nt(i);for(let a=0,m=t.length;a<m;a++)if(u){const l=n(t[a]);l.length&&Jt.apply(r,l)}else{let l=t[a][n];for(;l!=null&&!(i&&c(-1,l));)r.push(l),l=e?l[n]:null}return r}function Lt(t){return t.multiple&&t.options?_(st.call(t.options,n=>n.selected&&!n.disabled&&!n.parentNode.disabled),"value"):t.value||""}function fn(t){return arguments.length?this.each((n,e)=>{const i=e.multiple&&e.options;if(i||qt.test(e.type)){const r=K(t)?Et.call(t,String):z(t)?[]:[String(t)];i?p(e.options,(u,c)=>{c.selected=r.indexOf(c.value)>=0},!0):e.checked=r.indexOf(e.value)>=0}else e.value=$(t)||z(t)?"":t}):this[0]&&Lt(this[0])}o.val=fn,o.is=function(t){const n=nt(t);return ot.call(this,(e,i)=>n.call(e,i,e))},s.guid=1;function k(t){return t.length>1?st.call(t,(n,e,i)=>$t.call(i,n)===e):t}s.unique=k,o.add=function(t,n){return s(k(this.get().concat(s(t,n).get())))},o.children=function(t){return O(s(k(_(this,n=>n.children))),t)},o.parent=function(t){return O(s(k(_(this,"parentNode"))),t)},o.index=function(t){const n=t?s(t)[0]:this[0],e=t?this:s(n).parent().children();return $t.call(e,n)},o.closest=function(t){const n=this.filter(t);if(n.length)return n;const e=this.parent();return e.length?e.closest(t):n},o.siblings=function(t){return O(s(k(_(this,n=>s(n).parent().children().not(n)))),t)},o.find=function(t){return s(k(_(this,n=>ut(t,n))))};const an=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ln=/^$|^module$|\/(java|ecma)script/i,hn=["type","src","nonce","noModule"];function dn(t,n){const e=s(t);e.filter("script").add(e.find("script")).each((i,r)=>{if(ln.test(r.type)&&wt.contains(r)){const u=I("script");u.text=r.textContent.replace(an,""),p(hn,(c,a)=>{r[a]&&(u[a]=r[a])}),n.head.insertBefore(u,null),n.head.removeChild(u)}})}function pn(t,n,e,i,r){i?t.insertBefore(n,e?t.firstChild:null):t.nodeName==="HTML"?t.parentNode.replaceChild(n,t):t.parentNode.insertBefore(n,e?t:t.nextSibling),r&&dn(n,t.ownerDocument)}function H(t,n,e,i,r,u,c,a){return p(t,(m,l)=>{p(s(l),(q,g)=>{p(s(n),(J,w)=>{const C=e?g:w,f=e?w:g,N=e?q:J;pn(C,N?f.cloneNode(!0):f,i,r,!N)},a)},c)},u),n}o.after=function(){return H(arguments,this,!1,!1,!1,!0,!0)},o.append=function(){return H(arguments,this,!1,!1,!0)};function gn(t){if(!arguments.length)return this[0]&&this[0].innerHTML;if($(t))return this;const n=/<script[\s>]/.test(t);return this.each((e,i)=>{d(i)&&(n?s(i).empty().append(t):i.innerHTML=t)})}o.html=gn,o.appendTo=function(t){return H(arguments,this,!0,!1,!0)},o.wrapInner=function(t){return this.each((n,e)=>{const i=s(e),r=i.contents();r.length?r.wrapAll(t):i.append(t)})},o.before=function(){return H(arguments,this,!1,!0)},o.wrapAll=function(t){let n=s(t),e=n[0];for(;e.children.length;)e=e.firstElementChild;return this.first().before(n),this.appendTo(e)},o.wrap=function(t){return this.each((n,e)=>{const i=s(t)[0];s(e).wrapAll(n?i.cloneNode(!0):i)})},o.insertAfter=function(t){return H(arguments,this,!0,!1,!1,!1,!1,!0)},o.insertBefore=function(t){return H(arguments,this,!0,!0)},o.prepend=function(){return H(arguments,this,!1,!0,!0,!0,!0)},o.prependTo=function(t){return H(arguments,this,!0,!0,!0,!1,!1,!0)},o.contents=function(){return s(k(_(this,t=>t.tagName==="IFRAME"?[t.contentDocument]:t.tagName==="TEMPLATE"?t.content.childNodes:t.childNodes)))},o.next=function(t,n,e){return O(s(k(_(this,"nextElementSibling",n,e))),t)},o.nextAll=function(t){return this.next(t,!0)},o.nextUntil=function(t,n){return this.next(n,!0,t)},o.parents=function(t,n){return O(s(k(_(this,"parentElement",!0,n))),t)},o.parentsUntil=function(t,n){return this.parents(n,t)},o.prev=function(t,n,e){return O(s(k(_(this,"previousElementSibling",n,e))),t)},o.prevAll=function(t){return this.prev(t,!0)},o.prevUntil=function(t,n){return this.prev(n,!0,t)},o.map=function(t){return s(zt.apply([],Et.call(this,(n,e)=>t.call(n,e,n))))},o.clone=function(){return this.map((t,n)=>n.cloneNode(!0))},o.offsetParent=function(){return this.map((t,n)=>{let e=n.offsetParent;for(;e&&R(e,"position")==="static";)e=e.offsetParent;return e||wt})},o.slice=function(t,n){return s(At.call(this,t,n))};const mn=/-([a-z])/g;function lt(t){return t.replace(mn,(n,e)=>e.toUpperCase())}o.ready=function(t){const n=()=>setTimeout(t,0,s);return T.readyState!=="loading"?n():T.addEventListener("DOMContentLoaded",n),this},o.unwrap=function(){return this.parent().each((t,n)=>{if(n.tagName==="BODY")return;const e=s(n);e.replaceWith(e.children())}),this},o.offset=function(){const t=this[0];if(!t)return;const n=t.getBoundingClientRect();return{top:n.top+L.pageYOffset,left:n.left+L.pageXOffset}},o.position=function(){const t=this[0];if(!t)return;const n=R(t,"position")==="fixed",e=n?t.getBoundingClientRect():this.offset();if(!n){const i=t.ownerDocument;let r=t.offsetParent||i.documentElement;for(;(r===i.body||r===i.documentElement)&&R(r,"position")==="static";)r=r.parentNode;if(r!==t&&d(r)){const u=s(r).offset();e.top-=u.top+S(r,"borderTopWidth"),e.left-=u.left+S(r,"borderLeftWidth")}}return{top:e.top-S(t,"marginTop"),left:e.left-S(t,"marginLeft")}};const Ot={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};o.prop=function(t,n){if(t){if(b(t))return t=Ot[t]||t,arguments.length<2?this[0]&&this[0][t]:this.each((e,i)=>{i[t]=n});for(const e in t)this.prop(e,t[e]);return this}},o.removeProp=function(t){return this.each((n,e)=>{delete e[Ot[t]||t]})};const yn=/^--/;function ht(t){return yn.test(t)}const dt={},{style:bn}=Ct,wn=["webkit","moz","ms"];function Cn(t,n=ht(t)){if(n)return t;if(!dt[t]){const e=lt(t),i=`${e[0].toUpperCase()}${e.slice(1)}`,r=`${e} ${wn.join(`${i} `)}${i}`.split(" ");p(r,(u,c)=>{if(c in bn)return dt[t]=c,!1})}return dt[t]}const xn={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Ht(t,n,e=ht(t)){return!e&&!xn[t]&&St(n)?`${n}px`:n}function Tn(t,n){if(b(t)){const e=ht(t);return t=Cn(t,e),arguments.length<2?this[0]&&R(this[0],t,e):t?(n=Ht(t,n,e),this.each((i,r)=>{d(r)&&(e?r.style.setProperty(t,n):r.style[t]=n)})):this}for(const e in t)this.css(e,t[e]);return this}o.css=Tn;function It(t,n){try{return t(n)}catch{return n}}const $n=/^\s+|\s+$/;function Bt(t,n){const e=t.dataset[n]||t.dataset[lt(n)];return $n.test(e)?e:It(JSON.parse,e)}function En(t,n,e){e=It(JSON.stringify,e),t.dataset[lt(n)]=e}function An(t,n){if(!t){if(!this[0])return;const e={};for(const i in this[0].dataset)e[i]=Bt(this[0],i);return e}if(b(t))return arguments.length<2?this[0]&&Bt(this[0],t):$(n)?this:this.each((e,i)=>{En(i,t,n)});for(const e in t)this.data(e,t[e]);return this}o.data=An;function Mt(t,n){const e=t.documentElement;return Math.max(t.body[`scroll${n}`],e[`scroll${n}`],t.body[`offset${n}`],e[`offset${n}`],e[`client${n}`])}p([!0,!1],(t,n)=>{p(["Width","Height"],(e,i)=>{const r=`${n?"outer":"inner"}${i}`;o[r]=function(u){if(this[0])return W(this[0])?n?this[0][`inner${i}`]:this[0].document.documentElement[`client${i}`]:B(this[0])?Mt(this[0],i):this[0][`${n?"offset":"client"}${i}`]+(u&&n?S(this[0],`margin${e?"Top":"Left"}`)+S(this[0],`margin${e?"Bottom":"Right"}`):0)}})}),p(["Width","Height"],(t,n)=>{const e=n.toLowerCase();o[e]=function(i){if(!this[0])return $(i)?void 0:this;if(!arguments.length)return W(this[0])?this[0].document.documentElement[`client${n}`]:B(this[0])?Mt(this[0],n):this[0].getBoundingClientRect()[e]-kt(this[0],!t);const r=parseInt(i,10);return this.each((u,c)=>{if(!d(c))return;const a=R(c,"boxSizing");c.style[e]=Ht(e,r+(a==="border-box"?kt(c,!t):0))})}});const Pt="___cd";o.toggle=function(t){return this.each((n,e)=>{if(!d(e))return;const i=Rt(e);($(t)?i:t)?(e.style.display=e[Pt]||"",Rt(e)&&(e.style.display=on(e.tagName))):i||(e[Pt]=R(e,"display"),e.style.display="none")})},o.hide=function(){return this.toggle(!1)},o.show=function(){return this.toggle(!0)};const Dt="___ce",pt=".",gt={focus:"focusin",blur:"focusout"},jt={mouseenter:"mouseover",mouseleave:"mouseout"},Sn=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function mt(t){return jt[t]||gt[t]||t}function yt(t){const n=t.split(pt);return[n[0],n.slice(1).sort()]}o.trigger=function(t,n){if(b(t)){const[i,r]=yt(t),u=mt(i);if(!u)return this;const c=Sn.test(u)?"MouseEvents":"HTMLEvents";t=T.createEvent(c),t.initEvent(u,!0,!0),t.namespace=r.join(pt),t.___ot=i}t.___td=n;const e=t.___ot in gt;return this.each((i,r)=>{e&&M(r[t.___ot])&&(r[`___i${t.type}`]=!0,r[t.___ot](),r[`___i${t.type}`]=!1),r.dispatchEvent(t)})};function Ft(t){return t[Dt]=t[Dt]||{}}function kn(t,n,e,i,r){const u=Ft(t);u[n]=u[n]||[],u[n].push([e,i,r]),t.addEventListener(n,r)}function Wt(t,n){return!n||!ot.call(n,e=>t.indexOf(e)<0)}function et(t,n,e,i,r){const u=Ft(t);if(n)u[n]&&(u[n]=u[n].filter(([c,a,m])=>{if(r&&m.guid!==r.guid||!Wt(c,e)||i&&i!==a)return!0;t.removeEventListener(n,m)}));else for(n in u)et(t,n,e,i,r)}o.off=function(t,n,e){if($(t))this.each((i,r)=>{!d(r)&&!B(r)&&!W(r)||et(r)});else if(b(t))M(n)&&(e=n,n=""),p(tt(t),(i,r)=>{const[u,c]=yt(r),a=mt(u);this.each((m,l)=>{!d(l)&&!B(l)&&!W(l)||et(l,a,c,n,e)})});else for(const i in t)this.off(i,t[i]);return this},o.remove=function(t){return O(this,t).detach().off(),this},o.replaceWith=function(t){return this.before(t).remove()},o.replaceAll=function(t){return s(t).replaceWith(this),this};function Rn(t,n,e,i,r){if(!b(t)){for(const u in t)this.on(u,n,e,t[u],r);return this}return b(n)||($(n)||z(n)?n="":$(e)?(e=n,n=""):(i=e,e=n,n="")),M(i)||(i=e,e=void 0),i?(p(tt(t),(u,c)=>{const[a,m]=yt(c),l=mt(a),q=a in jt,g=a in gt;l&&this.each((J,w)=>{if(!d(w)&&!B(w)&&!W(w))return;const C=function(f){if(f.target[`___i${f.type}`])return f.stopImmediatePropagation();if(f.namespace&&!Wt(m,f.namespace.split(pt))||!n&&(g&&(f.target!==w||f.___ot===l)||q&&f.relatedTarget&&w.contains(f.relatedTarget)))return;let N=w;if(n){let x=f.target;for(;!_t(x,n);)if(x===w||(x=x.parentNode,!x))return;N=x}Object.defineProperty(f,"currentTarget",{configurable:!0,get(){return N}}),Object.defineProperty(f,"delegateTarget",{configurable:!0,get(){return w}}),Object.defineProperty(f,"data",{configurable:!0,get(){return e}});const it=i.call(N,f,f.___td);r&&et(w,l,m,n,C),it===!1&&(f.preventDefault(),f.stopPropagation())};C.guid=i.guid=i.guid||s.guid++,kn(w,l,m,n,C)})}),this):this}o.on=Rn;function _n(t,n,e,i){return this.on(t,n,e,i,!0)}o.one=_n;const Nn=/\r?\n/g;function vn(t,n){return`&${encodeURIComponent(t)}=${encodeURIComponent(n.replace(Nn,`\r
`))}`}const Ln=/file|reset|submit|button|image/i,qt=/radio|checkbox/i;o.serialize=function(){let t="";return this.each((n,e)=>{p(e.elements||[e],(i,r)=>{if(r.disabled||!r.name||r.tagName==="FIELDSET"||Ln.test(r.type)||qt.test(r.type)&&!r.checked)return;const u=Lt(r);if(!$(u)){const c=K(u)?u:[u];p(c,(a,m)=>{t+=vn(r.name,m)})}})}),t.slice(1)};function On(t){var n=window.getComputedStyle(t);return n.display==="none"||parseInt(n.height)===0}function Hn(){return this.filter(function(t,n){return!On(n)})}const Bn="";function In(t){const n=function(){let a=document.createElement("div");a.id="mm",a.style.width="1mm",document.querySelector("body").appendChild(a);let m=document.getElementById("mm").getBoundingClientRect();return s("#mm").remove(),m.width}();let e=500;s("#app").__proto__.notHidden=Hn,s(t).length&&(s(t).addClass("print-container"),s(t).children().notHidden().each(function(){s(this).addClass("break-page"),s(this).children().notHidden().each(function(c,a){a.tagName==="table"?s(this).addClass("break-table"):s(this).addClass("need-break")})}));function i(){console.log("start paging"),s("table.break-table").children("thead").addClass("need-break thead_break"),s("table.break-table tbody tr").addClass("need-break table_break");let c=r();for(;c.length;)c=r(u(c));console.log("end paging")}function r(c){return c?c.nextAll(".break-page").notHidden().first():s(".break-page").notHidden().first()}function u(c,a=0){if(--e<=0)throw new Error("Recursion error when breaking page");if(c.outerHeight()<=294*n+5||++a>50)return c;const m=c.offset().top,l=parseInt(c.css("paddingBottom"));let q=!1,g=null;return c.find(".need-break").notHidden().each(function(J,w){if(s(this).offset().top+s(this).outerHeight()-m+parseInt(s(this).css("marginBottom"))>294*n-l){q=!0;let N=c.attr("class");if(c.hasClass("new-break-page")||(N+=" new-break-page"),g=s(`<div class="${N}" style="display:block"></div>`),s(this).hasClass("table_break")){var C=s(`<table class="${s(this).parents("table").attr("class")}"></table>`);C.append("<tbody></tbody>");var f=s(this);let it=J>1;if(J==1&&(it=s(this).find(".need-break").notHidden().not(".thead_break").length!==0),it){C.prepend(f.parents("table").children("thead").clone());let x=s(this).prevAll("tr"),P=[],Y=[];for(let h=x.length-1;h>=0;h--){const V=x[h],U=h===x.length-1,E=s(V).find("td");if(U||(P=P.map(A=>A-1>0?A-1:0)),U){let A=0;for(let v=0,D=E.length;v<D;v++)A+=+s(E[v]).attr("colspan")||1;P=new Array(A).fill(0)}for(let A=0,v=E.length;A<v;A++){const D=E[A],X=+s(D).attr("rowspan")||1,j=+s(D).attr("colspan")||1;if(j>0){let F=P.findIndex(y=>y<1);for(let y=0;y<j;y++)P[F+y]=(P[F+y]||0)+X;if(X>1){Y[F]=[h,A,X,j];for(let y=1;y<j;y++)Y[F+y]=void 0}}}}let G=P.map(h=>h>1?"N":0);f.find("td").each(function(h){const V=+s(this).attr("colspan")||1,U=G.findIndex(E=>E===0);for(let E=0;E<V;E++)G[U+E]=h+1});const Vt={};for(let h=0;h<Y.length;h++){if(!Y[h])continue;const[V,U,E,A]=Y[h]||[],v=E-V-1;if(v<=0)continue;const D=s(x[V]).find("td")[U];s(D).attr("rowspan",E-v);const X=s(D).clone().attr("rowspan",v),j="splitTd"+h;Vt[j]=X;let F=G.findIndex(y=>y==="N");if(F!==-1)for(let y=0;y<A;y++)G[F+y]=j}const bt=f.clone().empty();[...new Set(G)].forEach(h=>{typeof h=="string"?bt.append(Vt[h]):bt.append(f.find("td").eq(h-1).clone())}),C.children("tbody").append(bt.clone()),C.children("tbody").append(f.nextAll().clone()),g.append(C),g.append(f.parents("table").nextAll().clone()),f.nextAll().remove(),f.parents("table").nextAll().remove(),f.remove()}else{f.nextAll().length?(C.prepend(f.parents("table").children("thead").clone()),C.children("tbody").append(f.nextAll().clone()),f.nextAll().remove(),g.append(C),g.append(f.parents("table").nextAll().clone()),f.parents("table").nextAll().remove()):(g.append(f.parents("table").nextAll().clone()),f.parents("table").nextAll().remove());let x=s(`<div style="height:${294*n-100}px;overflow:hidden;"></div>`);f.parents(".break-page").append(x),x.append(f.parents("table"))}}else s(this).hasClass("thead_break")?(g.append(s(this).parents("table").clone()),g.append(s(this).parents("table").nextAll().clone()),s(this).parents("table").nextAll().remove(),s(this).parents("table").remove()):(g.append(s(this).clone()),g.append(s(this).nextAll().clone()),s(this).nextAll().remove(),s(this).remove());return c.after(g),!1}}),q?u(g,a):c}return{execPaging:i}}return In});
