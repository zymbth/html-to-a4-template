(function(k,I){typeof exports=="object"&&typeof module<"u"?module.exports=I():typeof define=="function"&&define.amd?define(I):(k=typeof globalThis<"u"?globalThis:k||self,k.html2a4tmpl=I())})(this,function(){"use strict";const k=document,I=window,yt=k.documentElement,P=k.createElement.bind(k),xt=P("div"),it=P("table"),Dt=P("tbody"),Ct=P("tr"),{isArray:K,prototype:wt}=Array,{concat:Vt,filter:rt,indexOf:Tt,map:kt,push:Ut,slice:$t,some:st,splice:Jt}=wt,Yt=/^#(?:[\w-]|\\.|[^\x00-\xa0])*$/,Gt=/^\.(?:[\w-]|\\.|[^\x00-\xa0])*$/,Xt=/<.+>/,Kt=/^\w+$/;function ot(t,e){const n=Qt(e);return!t||!n&&!j(e)&&!y(e)?[]:!n&&Gt.test(t)?e.getElementsByClassName(t.slice(1).replace(/\\/g,"")):!n&&Kt.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t)}class Q{constructor(e,n){if(!e)return;if(at(e))return e;let i=e;if(w(e)){const r=n||k;if(i=Yt.test(e)&&j(r)?r.getElementById(e.slice(1).replace(/\\/g,"")):Xt.test(e)?Rt(e):at(r)?r.find(e):w(r)?s(r).find(e):ot(e,r),!i)return}else if(L(e))return this.ready(e);(i.nodeType||i===I)&&(i=[i]),this.length=i.length;for(let r=0,a=this.length;r<a;r++)this[r]=i[r]}init(e,n){return new Q(e,n)}}const o=Q.prototype,s=o.init;s.fn=s.prototype=o,o.length=0,o.splice=Jt,typeof Symbol=="function"&&(o[Symbol.iterator]=wt[Symbol.iterator]);function at(t){return t instanceof Q}function q(t){return!!t&&t===t.window}function j(t){return!!t&&t.nodeType===9}function Qt(t){return!!t&&t.nodeType===11}function y(t){return!!t&&t.nodeType===1}function Zt(t){return!!t&&t.nodeType===3}function te(t){return typeof t=="boolean"}function L(t){return typeof t=="function"}function w(t){return typeof t=="string"}function $(t){return t===void 0}function Y(t){return t===null}function At(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ct(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return e===null||e===Object.prototype}s.isWindow=q,s.isFunction=L,s.isArray=K,s.isNumeric=At,s.isPlainObject=ct;function x(t,e,n){if(n){let i=t.length;for(;i--;)if(e.call(t[i],i,t[i])===!1)return t}else if(ct(t)){const i=Object.keys(t);for(let r=0,a=i.length;r<a;r++){const u=i[r];if(e.call(t[u],u,t[u])===!1)return t}}else for(let i=0,r=t.length;i<r;i++)if(e.call(t[i],i,t[i])===!1)return t;return t}s.each=x,o.each=function(t){return x(this,t)},o.empty=function(){return this.each((t,e)=>{for(;e.firstChild;)e.removeChild(e.firstChild)})};function Z(...t){const e=te(t[0])?t.shift():!1,n=t.shift(),i=t.length;if(!n)return{};if(!i)return Z(e,s,n);for(let r=0;r<i;r++){const a=t[r];for(const u in a)e&&(K(a[u])||ct(a[u]))?((!n[u]||n[u].constructor!==a[u].constructor)&&(n[u]=new a[u].constructor),Z(e,n[u],a[u])):n[u]=a[u]}return n}s.extend=Z,o.extend=function(t){return Z(o,t)};const ee=/\S+/g;function tt(t){return w(t)?t.match(ee)||[]:[]}o.toggleClass=function(t,e){const n=tt(t),i=!$(e);return this.each((r,a)=>{y(a)&&x(n,(u,d)=>{i?e?a.classList.add(d):a.classList.remove(d):a.classList.toggle(d)})})},o.addClass=function(t){return this.toggleClass(t,!0)},o.removeAttr=function(t){const e=tt(t);return this.each((n,i)=>{y(i)&&x(e,(r,a)=>{i.removeAttribute(a)})})};function ne(t,e){if(t){if(w(t)){if(arguments.length<2){if(!this[0]||!y(this[0]))return;const n=this[0].getAttribute(t);return Y(n)?void 0:n}return $(e)?this:Y(e)?this.removeAttr(t):this.each((n,i)=>{y(i)&&i.setAttribute(t,e)})}for(const n in t)this.attr(n,t[n]);return this}}o.attr=ne,o.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr("class","")},o.hasClass=function(t){return!!t&&st.call(this,e=>y(e)&&e.classList.contains(t))},o.get=function(t){return $(t)?$t.call(this):(t=Number(t),this[t<0?t+this.length:t])},o.eq=function(t){return s(this.get(t))},o.first=function(){return this.eq(0)},o.last=function(){return this.eq(-1)};function ie(t){return $(t)?this.get().map(e=>y(e)||Zt(e)?e.textContent:"").join(""):this.each((e,n)=>{y(n)&&(n.textContent=t)})}o.text=ie;function R(t,e,n){if(!y(t))return;const i=I.getComputedStyle(t,null);return n?i.getPropertyValue(e)||void 0:i[e]||t.style[e]}function _(t,e){return parseInt(R(t,e),10)||0}function Et(t,e){return _(t,`border${e?"Left":"Top"}Width`)+_(t,`padding${e?"Left":"Top"}`)+_(t,`padding${e?"Right":"Bottom"}`)+_(t,`border${e?"Right":"Bottom"}Width`)}const ut={};function re(t){if(ut[t])return ut[t];const e=P(t);k.body.insertBefore(e,null);const n=R(e,"display");return k.body.removeChild(e),ut[t]=n!=="none"?n:"block"}function St(t){return R(t,"display")==="none"}function _t(t,e){const n=t&&(t.matches||t.webkitMatchesSelector||t.msMatchesSelector);return!!n&&!!e&&n.call(t,e)}function et(t){return w(t)?(e,n)=>_t(n,t):L(t)?t:at(t)?(e,n)=>t.is(n):t?(e,n)=>n===t:()=>!1}o.filter=function(t){const e=et(t);return s(rt.call(this,(n,i)=>e.call(n,i,n)))};function O(t,e){return e?t.filter(e):t}o.detach=function(t){return O(this,t).each((e,n)=>{n.parentNode&&n.parentNode.removeChild(n)}),this};const se=/^\s*<(\w+)[^>]*>/,oe=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,Nt={"*":xt,tr:Dt,td:Ct,th:Ct,thead:it,tbody:it,tfoot:it};function Rt(t){if(!w(t))return[];if(oe.test(t))return[P(RegExp.$1)];const e=se.test(t)&&RegExp.$1,n=Nt[e]||Nt["*"];return n.innerHTML=t,s(n.childNodes).detach().get()}s.parseHTML=Rt,o.has=function(t){const e=w(t)?(n,i)=>ot(t,i).length:(n,i)=>i.contains(t);return this.filter(e)},o.not=function(t){const e=et(t);return this.filter((n,i)=>(!w(t)||y(i))&&!e.call(i,n,i))};function v(t,e,n,i){const r=[],a=L(e),u=i&&et(i);for(let d=0,T=t.length;d<T;d++)if(a){const p=e(t[d]);p.length&&Ut.apply(r,p)}else{let p=t[d][e];for(;p!=null&&!(i&&u(-1,p));)r.push(p),p=n?p[e]:null}return r}function vt(t){return t.multiple&&t.options?v(rt.call(t.options,e=>e.selected&&!e.disabled&&!e.parentNode.disabled),"value"):t.value||""}function ae(t){return arguments.length?this.each((e,n)=>{const i=n.multiple&&n.options;if(i||zt.test(n.type)){const r=K(t)?kt.call(t,String):Y(t)?[]:[String(t)];i?x(n.options,(a,u)=>{u.selected=r.indexOf(u.value)>=0},!0):n.checked=r.indexOf(n.value)>=0}else n.value=$(t)||Y(t)?"":t}):this[0]&&vt(this[0])}o.val=ae,o.is=function(t){const e=et(t);return st.call(this,(n,i)=>e.call(n,i,n))},s.guid=1;function N(t){return t.length>1?rt.call(t,(e,n,i)=>Tt.call(i,e)===n):t}s.unique=N,o.add=function(t,e){return s(N(this.get().concat(s(t,e).get())))},o.children=function(t){return O(s(N(v(this,e=>e.children))),t)},o.parent=function(t){return O(s(N(v(this,"parentNode"))),t)},o.index=function(t){const e=t?s(t)[0]:this[0],n=t?this:s(e).parent().children();return Tt.call(n,e)},o.closest=function(t){const e=this.filter(t);if(e.length)return e;const n=this.parent();return n.length?n.closest(t):e},o.siblings=function(t){return O(s(N(v(this,e=>s(e).parent().children().not(e)))),t)},o.find=function(t){return s(N(v(this,e=>ot(t,e))))};const ce=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ue=/^$|^module$|\/(java|ecma)script/i,fe=["type","src","nonce","noModule"];function le(t,e){const n=s(t);n.filter("script").add(n.find("script")).each((i,r)=>{if(ue.test(r.type)&&yt.contains(r)){const a=P("script");a.text=r.textContent.replace(ce,""),x(fe,(u,d)=>{r[d]&&(a[d]=r[d])}),e.head.insertBefore(a,null),e.head.removeChild(a)}})}function de(t,e,n,i,r){i?t.insertBefore(e,n?t.firstChild:null):t.nodeName==="HTML"?t.parentNode.replaceChild(e,t):t.parentNode.insertBefore(e,n?t:t.nextSibling),r&&le(e,t.ownerDocument)}function B(t,e,n,i,r,a,u,d){return x(t,(T,p)=>{x(s(p),(G,D)=>{x(s(e),(f,l)=>{const h=n?D:l,c=n?l:D,A=n?G:f;de(h,A?c.cloneNode(!0):c,i,r,!A)},d)},u)},a),e}o.after=function(){return B(arguments,this,!1,!1,!1,!0,!0)},o.append=function(){return B(arguments,this,!1,!1,!0)};function he(t){if(!arguments.length)return this[0]&&this[0].innerHTML;if($(t))return this;const e=/<script[\s>]/.test(t);return this.each((n,i)=>{y(i)&&(e?s(i).empty().append(t):i.innerHTML=t)})}o.html=he,o.appendTo=function(t){return B(arguments,this,!0,!1,!0)},o.wrapInner=function(t){return this.each((e,n)=>{const i=s(n),r=i.contents();r.length?r.wrapAll(t):i.append(t)})},o.before=function(){return B(arguments,this,!1,!0)},o.wrapAll=function(t){let e=s(t),n=e[0];for(;n.children.length;)n=n.firstElementChild;return this.first().before(e),this.appendTo(n)},o.wrap=function(t){return this.each((e,n)=>{const i=s(t)[0];s(n).wrapAll(e?i.cloneNode(!0):i)})},o.insertAfter=function(t){return B(arguments,this,!0,!1,!1,!1,!1,!0)},o.insertBefore=function(t){return B(arguments,this,!0,!0)},o.prepend=function(){return B(arguments,this,!1,!0,!0,!0,!0)},o.prependTo=function(t){return B(arguments,this,!0,!0,!0,!1,!1,!0)},o.contents=function(){return s(N(v(this,t=>t.tagName==="IFRAME"?[t.contentDocument]:t.tagName==="TEMPLATE"?t.content.childNodes:t.childNodes)))},o.next=function(t,e,n){return O(s(N(v(this,"nextElementSibling",e,n))),t)},o.nextAll=function(t){return this.next(t,!0)},o.nextUntil=function(t,e){return this.next(e,!0,t)},o.parents=function(t,e){return O(s(N(v(this,"parentElement",!0,e))),t)},o.parentsUntil=function(t,e){return this.parents(e,t)},o.prev=function(t,e,n){return O(s(N(v(this,"previousElementSibling",e,n))),t)},o.prevAll=function(t){return this.prev(t,!0)},o.prevUntil=function(t,e){return this.prev(e,!0,t)},o.map=function(t){return s(Vt.apply([],kt.call(this,(e,n)=>t.call(e,n,e))))},o.clone=function(){return this.map((t,e)=>e.cloneNode(!0))},o.offsetParent=function(){return this.map((t,e)=>{let n=e.offsetParent;for(;n&&R(n,"position")==="static";)n=n.offsetParent;return n||yt})},o.slice=function(t,e){return s($t.call(this,t,e))};const pe=/-([a-z])/g;function ft(t){return t.replace(pe,(e,n)=>n.toUpperCase())}o.ready=function(t){const e=()=>setTimeout(t,0,s);return k.readyState!=="loading"?e():k.addEventListener("DOMContentLoaded",e),this},o.unwrap=function(){return this.parent().each((t,e)=>{if(e.tagName==="BODY")return;const n=s(e);n.replaceWith(n.children())}),this},o.offset=function(){const t=this[0];if(!t)return;const e=t.getBoundingClientRect();return{top:e.top+I.pageYOffset,left:e.left+I.pageXOffset}},o.position=function(){const t=this[0];if(!t)return;const e=R(t,"position")==="fixed",n=e?t.getBoundingClientRect():this.offset();if(!e){const i=t.ownerDocument;let r=t.offsetParent||i.documentElement;for(;(r===i.body||r===i.documentElement)&&R(r,"position")==="static";)r=r.parentNode;if(r!==t&&y(r)){const a=s(r).offset();n.top-=a.top+_(r,"borderTopWidth"),n.left-=a.left+_(r,"borderLeftWidth")}}return{top:n.top-_(t,"marginTop"),left:n.left-_(t,"marginLeft")}};const Ht={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};o.prop=function(t,e){if(t){if(w(t))return t=Ht[t]||t,arguments.length<2?this[0]&&this[0][t]:this.each((n,i)=>{i[t]=e});for(const n in t)this.prop(n,t[n]);return this}},o.removeProp=function(t){return this.each((e,n)=>{delete n[Ht[t]||t]})};const ge=/^--/;function lt(t){return ge.test(t)}const dt={},{style:me}=xt,be=["webkit","moz","ms"];function ye(t,e=lt(t)){if(e)return t;if(!dt[t]){const n=ft(t),i=`${n[0].toUpperCase()}${n.slice(1)}`,r=`${n} ${be.join(`${i} `)}${i}`.split(" ");x(r,(a,u)=>{if(u in me)return dt[t]=u,!1})}return dt[t]}const xe={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function It(t,e,n=lt(t)){return!n&&!xe[t]&&At(e)?`${e}px`:e}function Ce(t,e){if(w(t)){const n=lt(t);return t=ye(t,n),arguments.length<2?this[0]&&R(this[0],t,n):t?(e=It(t,e,n),this.each((i,r)=>{y(r)&&(n?r.style.setProperty(t,e):r.style[t]=e)})):this}for(const n in t)this.css(n,t[n]);return this}o.css=Ce;function Ot(t,e){try{return t(e)}catch{return e}}const we=/^\s+|\s+$/;function Bt(t,e){const n=t.dataset[e]||t.dataset[ft(e)];return we.test(n)?n:Ot(JSON.parse,n)}function Te(t,e,n){n=Ot(JSON.stringify,n),t.dataset[ft(e)]=n}function ke(t,e){if(!t){if(!this[0])return;const n={};for(const i in this[0].dataset)n[i]=Bt(this[0],i);return n}if(w(t))return arguments.length<2?this[0]&&Bt(this[0],t):$(e)?this:this.each((n,i)=>{Te(i,t,e)});for(const n in t)this.data(n,t[n]);return this}o.data=ke;function Mt(t,e){const n=t.documentElement;return Math.max(t.body[`scroll${e}`],n[`scroll${e}`],t.body[`offset${e}`],n[`offset${e}`],n[`client${e}`])}x([!0,!1],(t,e)=>{x(["Width","Height"],(n,i)=>{const r=`${e?"outer":"inner"}${i}`;o[r]=function(a){if(this[0])return q(this[0])?e?this[0][`inner${i}`]:this[0].document.documentElement[`client${i}`]:j(this[0])?Mt(this[0],i):this[0][`${e?"offset":"client"}${i}`]+(a&&e?_(this[0],`margin${n?"Top":"Left"}`)+_(this[0],`margin${n?"Bottom":"Right"}`):0)}})}),x(["Width","Height"],(t,e)=>{const n=e.toLowerCase();o[n]=function(i){if(!this[0])return $(i)?void 0:this;if(!arguments.length)return q(this[0])?this[0].document.documentElement[`client${e}`]:j(this[0])?Mt(this[0],e):this[0].getBoundingClientRect()[n]-Et(this[0],!t);const r=parseInt(i,10);return this.each((a,u)=>{if(!y(u))return;const d=R(u,"boxSizing");u.style[n]=It(n,r+(d==="border-box"?Et(u,!t):0))})}});const Pt="___cd";o.toggle=function(t){return this.each((e,n)=>{if(!y(n))return;const i=St(n);($(t)?i:t)?(n.style.display=n[Pt]||"",St(n)&&(n.style.display=re(n.tagName))):i||(n[Pt]=R(n,"display"),n.style.display="none")})},o.hide=function(){return this.toggle(!1)},o.show=function(){return this.toggle(!0)};const jt="___ce",ht=".",pt={focus:"focusin",blur:"focusout"},Lt={mouseenter:"mouseover",mouseleave:"mouseout"},$e=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function gt(t){return Lt[t]||pt[t]||t}function mt(t){const e=t.split(ht);return[e[0],e.slice(1).sort()]}o.trigger=function(t,e){if(w(t)){const[i,r]=mt(t),a=gt(i);if(!a)return this;const u=$e.test(a)?"MouseEvents":"HTMLEvents";t=k.createEvent(u),t.initEvent(a,!0,!0),t.namespace=r.join(ht),t.___ot=i}t.___td=e;const n=t.___ot in pt;return this.each((i,r)=>{n&&L(r[t.___ot])&&(r[`___i${t.type}`]=!0,r[t.___ot](),r[`___i${t.type}`]=!1),r.dispatchEvent(t)})};function Ft(t){return t[jt]=t[jt]||{}}function Ae(t,e,n,i,r){const a=Ft(t);a[e]=a[e]||[],a[e].push([n,i,r]),t.addEventListener(e,r)}function Wt(t,e){return!e||!st.call(e,n=>t.indexOf(n)<0)}function nt(t,e,n,i,r){const a=Ft(t);if(e)a[e]&&(a[e]=a[e].filter(([u,d,T])=>{if(r&&T.guid!==r.guid||!Wt(u,n)||i&&i!==d)return!0;t.removeEventListener(e,T)}));else for(e in a)nt(t,e,n,i,r)}o.off=function(t,e,n){if($(t))this.each((i,r)=>{!y(r)&&!j(r)&&!q(r)||nt(r)});else if(w(t))L(e)&&(n=e,e=""),x(tt(t),(i,r)=>{const[a,u]=mt(r),d=gt(a);this.each((T,p)=>{!y(p)&&!j(p)&&!q(p)||nt(p,d,u,e,n)})});else for(const i in t)this.off(i,t[i]);return this},o.remove=function(t){return O(this,t).detach().off(),this},o.replaceWith=function(t){return this.before(t).remove()},o.replaceAll=function(t){return s(t).replaceWith(this),this};function Ee(t,e,n,i,r){if(!w(t)){for(const a in t)this.on(a,e,n,t[a],r);return this}return w(e)||($(e)||Y(e)?e="":$(n)?(n=e,e=""):(i=n,n=e,e="")),L(i)||(i=n,n=void 0),i?(x(tt(t),(a,u)=>{const[d,T]=mt(u),p=gt(d),G=d in Lt,D=d in pt;p&&this.each((f,l)=>{if(!y(l)&&!j(l)&&!q(l))return;const h=function(c){if(c.target[`___i${c.type}`])return c.stopImmediatePropagation();if(c.namespace&&!Wt(T,c.namespace.split(ht))||!e&&(D&&(c.target!==l||c.___ot===p)||G&&c.relatedTarget&&l.contains(c.relatedTarget)))return;let A=l;if(e){let m=c.target;for(;!_t(m,e);)if(m===l||(m=m.parentNode,!m))return;A=m}Object.defineProperty(c,"currentTarget",{configurable:!0,get(){return A}}),Object.defineProperty(c,"delegateTarget",{configurable:!0,get(){return l}}),Object.defineProperty(c,"data",{configurable:!0,get(){return n}});const g=i.call(A,c,c.___td);r&&nt(l,p,T,e,h),g===!1&&(c.preventDefault(),c.stopPropagation())};h.guid=i.guid=i.guid||s.guid++,Ae(l,p,T,e,h)})}),this):this}o.on=Ee;function Se(t,e,n,i){return this.on(t,e,n,i,!0)}o.one=Se;const _e=/\r?\n/g;function Ne(t,e){return`&${encodeURIComponent(t)}=${encodeURIComponent(e.replace(_e,`\r
`))}`}const Re=/file|reset|submit|button|image/i,zt=/radio|checkbox/i;o.serialize=function(){let t="";return this.each((e,n)=>{x(n.elements||[n],(i,r)=>{if(r.disabled||!r.name||r.tagName==="FIELDSET"||Re.test(r.type)||zt.test(r.type)&&!r.checked)return;const a=vt(r);if(!$(a)){const u=K(a)?a:[a];x(u,(d,T)=>{t+=Ne(r.name,T)})}})}),t.slice(1)};function ve(t){var e=window.getComputedStyle(t);return e.display==="none"||parseInt(e.height)===0}function He(){return this.filter(function(t,e){return!ve(e)})}function Ie(t){return t instanceof Element?"element":Object.prototype.toString.call(t).replace(/\[object\s(.+)\]/,"$1").toLowerCase()}const Oe=`.print-container{font-size:9pt;line-height:18pt;letter-spacing:1px;width:210mm;margin:0 auto;box-sizing:border-box;background:#fff!important;color:#000!important}.print-container table{line-height:1.5}.break-page{box-shadow:0 0 8px 4px #ccc;padding:50px;margin-top:20px;page-break-after:always;position:relative;min-height:294mm;box-sizing:border-box}.break-page:first-child{margin-top:30px}.break-page:last-child{page-break-after:unset;margin-bottom:20px}table.break-table{border-collapse:collapse;border:1px solid black}table.break-table td,table.break-table th{border:1px solid black}@media print{.print-container{width:100%!important}.print-container .break-page{box-shadow:none;margin:0;max-height:294mm}.break-page:first-child{margin-top:0}img{max-height:902px}@page{size:a4;padding:0;margin:0}}
`;function Be(t,e=500,n=500){e=isNaN(parseInt(e))?500:parseInt(e),n=isNaN(parseInt(n))?500:parseInt(n),e<1&&(e=10),n<1&&(n=10),r(Oe);const i=function(){let l=document.createElement("div");l.id="mm",l.style.width="1mm",document.querySelector("body").appendChild(l);let h=document.getElementById("mm").getBoundingClientRect();return s("#mm").remove(),h.width}();s("body").__proto__.notHidden=He;function r(f){if(typeof f!="string"){console.error("print style is invalid");return}if(document.getElementById("print-style"))return;const l=document.createElement("style");l.id="print-style",l.setAttribute("type","text/css"),l.innerHTML=f,document.head.append(l)}function a(){const f=Ie(t);let l;["string","element","htmlcollection"].includes(f)&&(l=s(t)),l!=null&&l.length&&(l.addClass("print-container"),l.children().notHidden().each(function(){s(this).addClass("break-page"),s(this).children().notHidden().each(function(A,g){if(g.tagName.toLowerCase()==="table")s(this).addClass("break-table");else{if(["wrap-break"].some(m=>g.classList.contains(m)))return;s(this).addClass("need-break")}})})),console.log("start paging"),s("table.break-table").children("thead").addClass("need-break thead-break"),s("table.break-table tbody tr").addClass("need-break table-break"),s(".wrap-break").children().notHidden().addClass("need-break");let h=0,c=u();for(;c.length;){if(++h>n){console.error(`Pagination operation exceeds limit (${n} pages), you can change this limit in the initialization method.`);break}c=u(d(c))}console.log("end paging")}function u(f){return f?f.nextAll(".break-page").notHidden().first():s(".break-page").notHidden().first()}function d(f,l=0){if(f.outerHeight()<=294*i+5)return f;if(++l>e)return console.error(`Pagination operation exceeds recursion limit (${e} pages), you can change this limit in the initialization method.`),f;const h=f.offset().top,c=parseInt(f.css("paddingBottom"));let A=!1,g=null;return f.find(".need-break").notHidden().each(function(m,V){if(s(this).offset().top+s(this).outerHeight()-h+parseInt(s(this).css("marginBottom"))<=294*i-c)return!0;A=!0;let M=f.attr("class");return f.hasClass("new-break-page")||(M+=" new-break-page"),g=s(`<div class="${M}" style="display:block"></div>`),m===0?(console.warn("There is an element that exceeds the page height, and the page height is fixed to avoid pagnation bug."),console.log(this),f.css("overflow","hidden"),f.css("height",`${294*i}px`),g.append(s(this).nextAll().clone()),s(this).nextAll().remove(),f.after(g),!1):(s(this).hasClass("table-break")?D.call(this,g,m):s(this).hasClass("thead-break")?G.call(this,g):s(this).parent().hasClass("wrap-break")?p.call(this,g):T.call(this,g),f.after(g),!1)}),A?d(g,l):f}function T(f){!f||!this||(f.append(s(this).clone()),f.append(s(this).nextAll().clone()),s(this).nextAll().remove(),s(this).remove())}function p(f){if(!f||!this)return;if(s(this).prev().length===0)T.call(s(this).parent(),f);else{const h=s(this).parent().clone().empty();h.append(s(this).clone()),h.append(s(this).nextAll().clone()),f.append(h),f.append(s(this).parent().nextAll().clone()),s(this).parent().nextAll().remove(),s(this).nextAll().remove(),s(this).remove()}}function G(f){!f||!this||(f.append(s(this).parents("table").clone()),f.append(s(this).parents("table").nextAll().clone()),s(this).parents("table").nextAll().remove(),s(this).parents("table").remove())}function D(f,l){var h=s(`<table class="${s(this).parents("table").attr("class")}"></table>`);h.append("<tbody></tbody>");var c=s(this);let A=l>1;if(l==1&&(A=s(this).find(".need-break").notHidden().not(".thead-break").length!==0),A){h.prepend(c.parents("table").children("thead").clone());let g=s(this).prevAll("tr"),m=[],V=[];for(let b=g.length-1;b>=0;b--){const U=g[b],J=b===g.length-1,E=s(U).find("td");if(J||(m=m.map(S=>S-1>0?S-1:0)),J){let S=0;for(let H=0,F=E.length;H<F;H++)S+=+s(E[H]).attr("colspan")||1;m=new Array(S).fill(0)}for(let S=0,H=E.length;S<H;S++){const F=E[S],X=+s(F).attr("rowspan")||1,W=+s(F).attr("colspan")||1;if(W>0){let z=m.findIndex(C=>C<1);for(let C=0;C<W;C++)m[z+C]=(m[z+C]||0)+X;if(X>1){V[z]=[b,S,X,W];for(let C=1;C<W;C++)V[z+C]=void 0}}}}let M=m.map(b=>b>1?"N":0);c.find("td").each(function(b){const U=+s(this).attr("colspan")||1,J=M.findIndex(E=>E===0);for(let E=0;E<U;E++)M[J+E]=b+1});const qt={};for(let b=0;b<V.length;b++){if(!V[b])continue;const[U,J,E,S]=V[b]||[],H=E-U-1;if(H<=0)continue;const F=s(g[U]).find("td")[J];s(F).attr("rowspan",E-H);const X=s(F).clone().attr("rowspan",H),W="splitTd"+b;qt[W]=X;let z=M.findIndex(C=>C==="N");if(z!==-1)for(let C=0;C<S;C++)M[z+C]=W}const bt=c.clone().empty();[...new Set(M)].forEach(b=>{typeof b=="string"?bt.append(qt[b]):bt.append(c.find("td").eq(b-1).clone())});const Me=c.prev("tr").length===0;h.children("tbody").append(bt.clone()),h.children("tbody").append(c.nextAll().clone()),f.append(h),f.append(c.parents("table").nextAll().clone()),c.nextAll().remove(),c.parents("table").nextAll().remove(),Me?c.parents("table").remove():c.remove()}else{c.nextAll().length?(h.prepend(c.parents("table").children("thead").clone()),h.children("tbody").append(c.nextAll().clone()),c.nextAll().remove(),f.append(h),f.append(c.parents("table").nextAll().clone()),c.parents("table").nextAll().remove()):(f.append(c.parents("table").nextAll().clone()),c.parents("table").nextAll().remove());let g=s(`<div style="height:${294*i-100}px;overflow:hidden;"></div>`);c.parents(".break-page").append(g),g.append(c.parents("table"))}}return{execPaging:a}}return Be});
