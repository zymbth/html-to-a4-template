(function(E,v){typeof exports=="object"&&typeof module<"u"?module.exports=v():typeof define=="function"&&define.amd?define(v):(E=typeof globalThis<"u"?globalThis:E||self,E.html2a4tmpl=v())})(this,function(){"use strict";const E=document,v=window,mt=E.documentElement,M=E.createElement.bind(E),bt=M("div"),nt=M("table"),Wt=M("tbody"),yt=M("tr"),{isArray:G,prototype:xt}=Array,{concat:qt,filter:et,indexOf:Ct,map:wt,push:zt,slice:Tt,some:it,splice:Vt}=xt,Ut=/^#(?:[\w-]|\\.|[^\x00-\xa0])*$/,Jt=/^\.(?:[\w-]|\\.|[^\x00-\xa0])*$/,Yt=/<.+>/,Gt=/^\w+$/;function rt(t,n){const e=Xt(n);return!t||!e&&!j(n)&&!b(n)?[]:!e&&Jt.test(t)?n.getElementsByClassName(t.slice(1).replace(/\\/g,"")):!e&&Gt.test(t)?n.getElementsByTagName(t):n.querySelectorAll(t)}class X{constructor(n,e){if(!n)return;if(st(n))return n;let i=n;if(w(n)){const r=e||E;if(i=Ut.test(n)&&j(r)?r.getElementById(n.slice(1).replace(/\\/g,"")):Yt.test(n)?At(n):st(r)?r.find(n):w(r)?s(r).find(n):rt(n,r),!i)return}else if(D(n))return this.ready(n);(i.nodeType||i===v)&&(i=[i]),this.length=i.length;for(let r=0,c=this.length;r<c;r++)this[r]=i[r]}init(n,e){return new X(n,e)}}const o=X.prototype,s=o.init;s.fn=s.prototype=o,o.length=0,o.splice=Vt,typeof Symbol=="function"&&(o[Symbol.iterator]=xt[Symbol.iterator]);function st(t){return t instanceof X}function z(t){return!!t&&t===t.window}function j(t){return!!t&&t.nodeType===9}function Xt(t){return!!t&&t.nodeType===11}function b(t){return!!t&&t.nodeType===1}function Kt(t){return!!t&&t.nodeType===3}function Qt(t){return typeof t=="boolean"}function D(t){return typeof t=="function"}function w(t){return typeof t=="string"}function $(t){return t===void 0}function J(t){return t===null}function kt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function ot(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return n===null||n===Object.prototype}s.isWindow=z,s.isFunction=D,s.isArray=G,s.isNumeric=kt,s.isPlainObject=ot;function y(t,n,e){if(e){let i=t.length;for(;i--;)if(n.call(t[i],i,t[i])===!1)return t}else if(ot(t)){const i=Object.keys(t);for(let r=0,c=i.length;r<c;r++){const u=i[r];if(n.call(t[u],u,t[u])===!1)return t}}else for(let i=0,r=t.length;i<r;i++)if(n.call(t[i],i,t[i])===!1)return t;return t}s.each=y,o.each=function(t){return y(this,t)},o.empty=function(){return this.each((t,n)=>{for(;n.firstChild;)n.removeChild(n.firstChild)})};function K(...t){const n=Qt(t[0])?t.shift():!1,e=t.shift(),i=t.length;if(!e)return{};if(!i)return K(n,s,e);for(let r=0;r<i;r++){const c=t[r];for(const u in c)n&&(G(c[u])||ot(c[u]))?((!e[u]||e[u].constructor!==c[u].constructor)&&(e[u]=new c[u].constructor),K(n,e[u],c[u])):e[u]=c[u]}return e}s.extend=K,o.extend=function(t){return K(o,t)};const Zt=/\S+/g;function Q(t){return w(t)?t.match(Zt)||[]:[]}o.toggleClass=function(t,n){const e=Q(t),i=!$(n);return this.each((r,c)=>{b(c)&&y(e,(u,d)=>{i?n?c.classList.add(d):c.classList.remove(d):c.classList.toggle(d)})})},o.addClass=function(t){return this.toggleClass(t,!0)},o.removeAttr=function(t){const n=Q(t);return this.each((e,i)=>{b(i)&&y(n,(r,c)=>{i.removeAttribute(c)})})};function tn(t,n){if(t){if(w(t)){if(arguments.length<2){if(!this[0]||!b(this[0]))return;const e=this[0].getAttribute(t);return J(e)?void 0:e}return $(n)?this:J(n)?this.removeAttr(t):this.each((e,i)=>{b(i)&&i.setAttribute(t,n)})}for(const e in t)this.attr(e,t[e]);return this}}o.attr=tn,o.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr("class","")},o.hasClass=function(t){return!!t&&it.call(this,n=>b(n)&&n.classList.contains(t))},o.get=function(t){return $(t)?Tt.call(this):(t=Number(t),this[t<0?t+this.length:t])},o.eq=function(t){return s(this.get(t))},o.first=function(){return this.eq(0)},o.last=function(){return this.eq(-1)};function nn(t){return $(t)?this.get().map(n=>b(n)||Kt(n)?n.textContent:"").join(""):this.each((n,e)=>{b(e)&&(e.textContent=t)})}o.text=nn;function L(t,n,e){if(!b(t))return;const i=v.getComputedStyle(t,null);return e?i.getPropertyValue(n)||void 0:i[n]||t.style[n]}function R(t,n){return parseInt(L(t,n),10)||0}function Et(t,n){return R(t,`border${n?"Left":"Top"}Width`)+R(t,`padding${n?"Left":"Top"}`)+R(t,`padding${n?"Right":"Bottom"}`)+R(t,`border${n?"Right":"Bottom"}Width`)}const ct={};function en(t){if(ct[t])return ct[t];const n=M(t);E.body.insertBefore(n,null);const e=L(n,"display");return E.body.removeChild(n),ct[t]=e!=="none"?e:"block"}function $t(t){return L(t,"display")==="none"}function St(t,n){const e=t&&(t.matches||t.webkitMatchesSelector||t.msMatchesSelector);return!!e&&!!n&&e.call(t,n)}function Z(t){return w(t)?(n,e)=>St(e,t):D(t)?t:st(t)?(n,e)=>t.is(e):t?(n,e)=>e===t:()=>!1}o.filter=function(t){const n=Z(t);return s(et.call(this,(e,i)=>n.call(e,i,e)))};function B(t,n){return n?t.filter(n):t}o.detach=function(t){return B(this,t).each((n,e)=>{e.parentNode&&e.parentNode.removeChild(e)}),this};const rn=/^\s*<(\w+)[^>]*>/,sn=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,_t={"*":bt,tr:Wt,td:yt,th:yt,thead:nt,tbody:nt,tfoot:nt};function At(t){if(!w(t))return[];if(sn.test(t))return[M(RegExp.$1)];const n=rn.test(t)&&RegExp.$1,e=_t[n]||_t["*"];return e.innerHTML=t,s(e.childNodes).detach().get()}s.parseHTML=At,o.has=function(t){const n=w(t)?(e,i)=>rt(t,i).length:(e,i)=>i.contains(t);return this.filter(n)},o.not=function(t){const n=Z(t);return this.filter((e,i)=>(!w(t)||b(i))&&!n.call(i,e,i))};function O(t,n,e,i){const r=[],c=D(n),u=i&&Z(i);for(let d=0,k=t.length;d<k;d++)if(c){const p=n(t[d]);p.length&&zt.apply(r,p)}else{let p=t[d][n];for(;p!=null&&!(i&&u(-1,p));)r.push(p),p=e?p[n]:null}return r}function Rt(t){return t.multiple&&t.options?O(et.call(t.options,n=>n.selected&&!n.disabled&&!n.parentNode.disabled),"value"):t.value||""}function on(t){return arguments.length?this.each((n,e)=>{const i=e.multiple&&e.options;if(i||Dt.test(e.type)){const r=G(t)?wt.call(t,String):J(t)?[]:[String(t)];i?y(e.options,(c,u)=>{u.selected=r.indexOf(u.value)>=0},!0):e.checked=r.indexOf(e.value)>=0}else e.value=$(t)||J(t)?"":t}):this[0]&&Rt(this[0])}o.val=on,o.is=function(t){const n=Z(t);return it.call(this,(e,i)=>n.call(e,i,e))},s.guid=1;function N(t){return t.length>1?et.call(t,(n,e,i)=>Ct.call(i,n)===e):t}s.unique=N,o.add=function(t,n){return s(N(this.get().concat(s(t,n).get())))},o.children=function(t){return B(s(N(O(this,n=>n.children))),t)},o.parent=function(t){return B(s(N(O(this,"parentNode"))),t)},o.index=function(t){const n=t?s(t)[0]:this[0],e=t?this:s(n).parent().children();return Ct.call(e,n)},o.closest=function(t){const n=this.filter(t);if(n.length)return n;const e=this.parent();return e.length?e.closest(t):n},o.siblings=function(t){return B(s(N(O(this,n=>s(n).parent().children().not(n)))),t)},o.find=function(t){return s(N(O(this,n=>rt(t,n))))};const cn=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,un=/^$|^module$|\/(java|ecma)script/i,an=["type","src","nonce","noModule"];function fn(t,n){const e=s(t);e.filter("script").add(e.find("script")).each((i,r)=>{if(un.test(r.type)&&mt.contains(r)){const c=M("script");c.text=r.textContent.replace(cn,""),y(an,(u,d)=>{r[d]&&(c[d]=r[d])}),n.head.insertBefore(c,null),n.head.removeChild(c)}})}function ln(t,n,e,i,r){i?t.insertBefore(n,e?t.firstChild:null):t.nodeName==="HTML"?t.parentNode.replaceChild(n,t):t.parentNode.insertBefore(n,e?t:t.nextSibling),r&&fn(n,t.ownerDocument)}function I(t,n,e,i,r,c,u,d){return y(t,(k,p)=>{y(s(p),(f,h)=>{y(s(n),(g,a)=>{const S=e?h:a,l=e?a:h,x=e?f:g;ln(S,x?l.cloneNode(!0):l,i,r,!x)},d)},u)},c),n}o.after=function(){return I(arguments,this,!1,!1,!1,!0,!0)},o.append=function(){return I(arguments,this,!1,!1,!0)};function dn(t){if(!arguments.length)return this[0]&&this[0].innerHTML;if($(t))return this;const n=/<script[\s>]/.test(t);return this.each((e,i)=>{b(i)&&(n?s(i).empty().append(t):i.innerHTML=t)})}o.html=dn,o.appendTo=function(t){return I(arguments,this,!0,!1,!0)},o.wrapInner=function(t){return this.each((n,e)=>{const i=s(e),r=i.contents();r.length?r.wrapAll(t):i.append(t)})},o.before=function(){return I(arguments,this,!1,!0)},o.wrapAll=function(t){let n=s(t),e=n[0];for(;e.children.length;)e=e.firstElementChild;return this.first().before(n),this.appendTo(e)},o.wrap=function(t){return this.each((n,e)=>{const i=s(t)[0];s(e).wrapAll(n?i.cloneNode(!0):i)})},o.insertAfter=function(t){return I(arguments,this,!0,!1,!1,!1,!1,!0)},o.insertBefore=function(t){return I(arguments,this,!0,!0)},o.prepend=function(){return I(arguments,this,!1,!0,!0,!0,!0)},o.prependTo=function(t){return I(arguments,this,!0,!0,!0,!1,!1,!0)},o.contents=function(){return s(N(O(this,t=>t.tagName==="IFRAME"?[t.contentDocument]:t.tagName==="TEMPLATE"?t.content.childNodes:t.childNodes)))},o.next=function(t,n,e){return B(s(N(O(this,"nextElementSibling",n,e))),t)},o.nextAll=function(t){return this.next(t,!0)},o.nextUntil=function(t,n){return this.next(n,!0,t)},o.parents=function(t,n){return B(s(N(O(this,"parentElement",!0,n))),t)},o.parentsUntil=function(t,n){return this.parents(n,t)},o.prev=function(t,n,e){return B(s(N(O(this,"previousElementSibling",n,e))),t)},o.prevAll=function(t){return this.prev(t,!0)},o.prevUntil=function(t,n){return this.prev(n,!0,t)},o.map=function(t){return s(qt.apply([],wt.call(this,(n,e)=>t.call(n,e,n))))},o.clone=function(){return this.map((t,n)=>n.cloneNode(!0))},o.offsetParent=function(){return this.map((t,n)=>{let e=n.offsetParent;for(;e&&L(e,"position")==="static";)e=e.offsetParent;return e||mt})},o.slice=function(t,n){return s(Tt.call(this,t,n))};const hn=/-([a-z])/g;function ut(t){return t.replace(hn,(n,e)=>e.toUpperCase())}o.ready=function(t){const n=()=>setTimeout(t,0,s);return E.readyState!=="loading"?n():E.addEventListener("DOMContentLoaded",n),this},o.unwrap=function(){return this.parent().each((t,n)=>{if(n.tagName==="BODY")return;const e=s(n);e.replaceWith(e.children())}),this},o.offset=function(){const t=this[0];if(!t)return;const n=t.getBoundingClientRect();return{top:n.top+v.pageYOffset,left:n.left+v.pageXOffset}},o.position=function(){const t=this[0];if(!t)return;const n=L(t,"position")==="fixed",e=n?t.getBoundingClientRect():this.offset();if(!n){const i=t.ownerDocument;let r=t.offsetParent||i.documentElement;for(;(r===i.body||r===i.documentElement)&&L(r,"position")==="static";)r=r.parentNode;if(r!==t&&b(r)){const c=s(r).offset();e.top-=c.top+R(r,"borderTopWidth"),e.left-=c.left+R(r,"borderLeftWidth")}}return{top:e.top-R(t,"marginTop"),left:e.left-R(t,"marginLeft")}};const Nt={class:"className",contenteditable:"contentEditable",for:"htmlFor",readonly:"readOnly",maxlength:"maxLength",tabindex:"tabIndex",colspan:"colSpan",rowspan:"rowSpan",usemap:"useMap"};o.prop=function(t,n){if(t){if(w(t))return t=Nt[t]||t,arguments.length<2?this[0]&&this[0][t]:this.each((e,i)=>{i[t]=n});for(const e in t)this.prop(e,t[e]);return this}},o.removeProp=function(t){return this.each((n,e)=>{delete e[Nt[t]||t]})};const pn=/^--/;function at(t){return pn.test(t)}const ft={},{style:gn}=bt,mn=["webkit","moz","ms"];function bn(t,n=at(t)){if(n)return t;if(!ft[t]){const e=ut(t),i=`${e[0].toUpperCase()}${e.slice(1)}`,r=`${e} ${mn.join(`${i} `)}${i}`.split(" ");y(r,(c,u)=>{if(u in gn)return ft[t]=u,!1})}return ft[t]}const yn={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function Lt(t,n,e=at(t)){return!e&&!yn[t]&&kt(n)?`${n}px`:n}function xn(t,n){if(w(t)){const e=at(t);return t=bn(t,e),arguments.length<2?this[0]&&L(this[0],t,e):t?(n=Lt(t,n,e),this.each((i,r)=>{b(r)&&(e?r.style.setProperty(t,n):r.style[t]=n)})):this}for(const e in t)this.css(e,t[e]);return this}o.css=xn;function Ot(t,n){try{return t(n)}catch{return n}}const Cn=/^\s+|\s+$/;function Ht(t,n){const e=t.dataset[n]||t.dataset[ut(n)];return Cn.test(e)?e:Ot(JSON.parse,e)}function wn(t,n,e){e=Ot(JSON.stringify,e),t.dataset[ut(n)]=e}function Tn(t,n){if(!t){if(!this[0])return;const e={};for(const i in this[0].dataset)e[i]=Ht(this[0],i);return e}if(w(t))return arguments.length<2?this[0]&&Ht(this[0],t):$(n)?this:this.each((e,i)=>{wn(i,t,n)});for(const e in t)this.data(e,t[e]);return this}o.data=Tn;function vt(t,n){const e=t.documentElement;return Math.max(t.body[`scroll${n}`],e[`scroll${n}`],t.body[`offset${n}`],e[`offset${n}`],e[`client${n}`])}y([!0,!1],(t,n)=>{y(["Width","Height"],(e,i)=>{const r=`${n?"outer":"inner"}${i}`;o[r]=function(c){if(this[0])return z(this[0])?n?this[0][`inner${i}`]:this[0].document.documentElement[`client${i}`]:j(this[0])?vt(this[0],i):this[0][`${n?"offset":"client"}${i}`]+(c&&n?R(this[0],`margin${e?"Top":"Left"}`)+R(this[0],`margin${e?"Bottom":"Right"}`):0)}})}),y(["Width","Height"],(t,n)=>{const e=n.toLowerCase();o[e]=function(i){if(!this[0])return $(i)?void 0:this;if(!arguments.length)return z(this[0])?this[0].document.documentElement[`client${n}`]:j(this[0])?vt(this[0],n):this[0].getBoundingClientRect()[e]-Et(this[0],!t);const r=parseInt(i,10);return this.each((c,u)=>{if(!b(u))return;const d=L(u,"boxSizing");u.style[e]=Lt(e,r+(d==="border-box"?Et(u,!t):0))})}});const Bt="___cd";o.toggle=function(t){return this.each((n,e)=>{if(!b(e))return;const i=$t(e);($(t)?i:t)?(e.style.display=e[Bt]||"",$t(e)&&(e.style.display=en(e.tagName))):i||(e[Bt]=L(e,"display"),e.style.display="none")})},o.hide=function(){return this.toggle(!1)},o.show=function(){return this.toggle(!0)};const It="___ce",lt=".",dt={focus:"focusin",blur:"focusout"},Pt={mouseenter:"mouseover",mouseleave:"mouseout"},kn=/^(mouse|pointer|contextmenu|drag|drop|click|dblclick)/i;function ht(t){return Pt[t]||dt[t]||t}function pt(t){const n=t.split(lt);return[n[0],n.slice(1).sort()]}o.trigger=function(t,n){if(w(t)){const[i,r]=pt(t),c=ht(i);if(!c)return this;const u=kn.test(c)?"MouseEvents":"HTMLEvents";t=E.createEvent(u),t.initEvent(c,!0,!0),t.namespace=r.join(lt),t.___ot=i}t.___td=n;const e=t.___ot in dt;return this.each((i,r)=>{e&&D(r[t.___ot])&&(r[`___i${t.type}`]=!0,r[t.___ot](),r[`___i${t.type}`]=!1),r.dispatchEvent(t)})};function Mt(t){return t[It]=t[It]||{}}function En(t,n,e,i,r){const c=Mt(t);c[n]=c[n]||[],c[n].push([e,i,r]),t.addEventListener(n,r)}function jt(t,n){return!n||!it.call(n,e=>t.indexOf(e)<0)}function tt(t,n,e,i,r){const c=Mt(t);if(n)c[n]&&(c[n]=c[n].filter(([u,d,k])=>{if(r&&k.guid!==r.guid||!jt(u,e)||i&&i!==d)return!0;t.removeEventListener(n,k)}));else for(n in c)tt(t,n,e,i,r)}o.off=function(t,n,e){if($(t))this.each((i,r)=>{!b(r)&&!j(r)&&!z(r)||tt(r)});else if(w(t))D(n)&&(e=n,n=""),y(Q(t),(i,r)=>{const[c,u]=pt(r),d=ht(c);this.each((k,p)=>{!b(p)&&!j(p)&&!z(p)||tt(p,d,u,n,e)})});else for(const i in t)this.off(i,t[i]);return this},o.remove=function(t){return B(this,t).detach().off(),this},o.replaceWith=function(t){return this.before(t).remove()},o.replaceAll=function(t){return s(t).replaceWith(this),this};function $n(t,n,e,i,r){if(!w(t)){for(const c in t)this.on(c,n,e,t[c],r);return this}return w(n)||($(n)||J(n)?n="":$(e)?(e=n,n=""):(i=e,e=n,n="")),D(i)||(i=e,e=void 0),i?(y(Q(t),(c,u)=>{const[d,k]=pt(u),p=ht(d),f=d in Pt,h=d in dt;p&&this.each((g,a)=>{if(!b(a)&&!j(a)&&!z(a))return;const S=function(l){if(l.target[`___i${l.type}`])return l.stopImmediatePropagation();if(l.namespace&&!jt(k,l.namespace.split(lt))||!n&&(h&&(l.target!==a||l.___ot===p)||f&&l.relatedTarget&&a.contains(l.relatedTarget)))return;let x=a;if(n){let T=l.target;for(;!St(T,n);)if(T===a||(T=T.parentNode,!T))return;x=T}Object.defineProperty(l,"currentTarget",{configurable:!0,get(){return x}}),Object.defineProperty(l,"delegateTarget",{configurable:!0,get(){return a}}),Object.defineProperty(l,"data",{configurable:!0,get(){return e}});const P=i.call(x,l,l.___td);r&&tt(a,p,k,n,S),P===!1&&(l.preventDefault(),l.stopPropagation())};S.guid=i.guid=i.guid||s.guid++,En(a,p,k,n,S)})}),this):this}o.on=$n;function Sn(t,n,e,i){return this.on(t,n,e,i,!0)}o.one=Sn;const _n=/\r?\n/g;function An(t,n){return`&${encodeURIComponent(t)}=${encodeURIComponent(n.replace(_n,`\r
`))}`}const Rn=/file|reset|submit|button|image/i,Dt=/radio|checkbox/i;o.serialize=function(){let t="";return this.each((n,e)=>{y(e.elements||[e],(i,r)=>{if(r.disabled||!r.name||r.tagName==="FIELDSET"||Rn.test(r.type)||Dt.test(r.type)&&!r.checked)return;const c=Rt(r);if(!$(c)){const u=G(c)?c:[c];y(u,(d,k)=>{t+=An(r.name,k)})}})}),t.slice(1)};function Nn(t){var n=window.getComputedStyle(t);return n.display==="none"||parseInt(n.height)===0}function Ln(){return this.filter(function(t,n){return!Nn(n)})}function On(t){return t instanceof Element?"element":Object.prototype.toString.call(t).replace(/\[object\s(.+)\]/,"$1").toLowerCase()}const Hn=`.print-container{font-size:9pt;line-height:18pt;letter-spacing:1px;width:210mm;margin:0 auto;box-sizing:border-box;background:#fff!important;color:#000!important}.print-container table{line-height:1.5}.break-page{box-shadow:0 0 8px 4px #ccc;padding:50px;margin-top:20px;page-break-after:always;position:relative;min-height:294mm;box-sizing:border-box}.break-page:first-child{margin-top:30px}.break-page:last-child{page-break-after:unset;margin-bottom:20px}table.break-table{border-collapse:collapse;border:1px solid black}table.break-table td,table.break-table th{border:1px solid black}@media print{.print-container{width:100%!important}.print-container .break-page{box-shadow:none;margin:0;max-height:294mm}.break-page:first-child{margin-top:0}img{max-height:902px}@page{size:a4;padding:0;margin:0}}
`;function vn(t){i(Hn);const n=function(){let h=document.createElement("div");h.id="mm",h.style.width="1mm",document.querySelector("body").appendChild(h);let g=document.getElementById("mm").getBoundingClientRect();return s("#mm").remove(),g.width}();let e=500;s("body").__proto__.notHidden=Ln;function i(f){if(typeof f!="string"){console.error("print style is invalid");return}if(document.getElementById("print-style"))return;const h=document.createElement("style");h.id="print-style",h.setAttribute("type","text/css"),h.innerHTML=f,document.head.append(h)}function r(){const f=On(t);let h;["string","element","htmlcollection"].includes(f)&&(h=s(t)),h!=null&&h.length&&(h.addClass("print-container"),h.children().notHidden().each(function(){s(this).addClass("break-page"),s(this).children().notHidden().each(function(a,S){S.tagName.toLowerCase()==="table"?s(this).addClass("break-table"):s(this).addClass("need-break")})})),console.log("start paging"),s("table.break-table").children("thead").addClass("need-break thead_break"),s("table.break-table tbody tr").addClass("need-break table_break");let g=c();for(;g.length;)g=c(u(g));console.log("end paging")}function c(f){return f?f.nextAll(".break-page").notHidden().first():s(".break-page").notHidden().first()}function u(f,h=0){if(--e<=0)throw new Error("Recursion error when breaking page");if(f.outerHeight()<=294*n+5||++h>50)return f;const g=f.offset().top,a=parseInt(f.css("paddingBottom"));let S=!1,l=null;return f.find(".need-break").notHidden().each(function(x,P){if(s(this).offset().top+s(this).outerHeight()-g+parseInt(s(this).css("marginBottom"))<=294*n-a)return!0;S=!0;let T=f.attr("class");return f.hasClass("new-break-page")||(T+=" new-break-page"),l=s(`<div class="${T}" style="display:block"></div>`),s(this).hasClass("table_break")?p.call(this,l,x):s(this).hasClass("thead_break")?k.call(this,l):d.call(this,l),f.after(l),!1}),S?u(l,h):f}function d(f){!f||!this||(f.append(s(this).clone()),f.append(s(this).nextAll().clone()),s(this).nextAll().remove(),s(this).remove())}function k(f){!f||!this||(f.append(s(this).parents("table").clone()),f.append(s(this).parents("table").nextAll().clone()),s(this).parents("table").nextAll().remove(),s(this).parents("table").remove())}function p(f,h){var g=s(`<table class="${s(this).parents("table").attr("class")}"></table>`);g.append("<tbody></tbody>");var a=s(this);let S=h>1;if(h==1&&(S=s(this).find(".need-break").notHidden().not(".thead_break").length!==0),S){g.prepend(a.parents("table").children("thead").clone());let l=s(this).prevAll("tr"),x=[],P=[];for(let m=l.length-1;m>=0;m--){const V=l[m],U=m===l.length-1,_=s(V).find("td");if(U||(x=x.map(A=>A-1>0?A-1:0)),U){let A=0;for(let H=0,F=_.length;H<F;H++)A+=+s(_[H]).attr("colspan")||1;x=new Array(A).fill(0)}for(let A=0,H=_.length;A<H;A++){const F=_[A],Y=+s(F).attr("rowspan")||1,W=+s(F).attr("colspan")||1;if(W>0){let q=x.findIndex(C=>C<1);for(let C=0;C<W;C++)x[q+C]=(x[q+C]||0)+Y;if(Y>1){P[q]=[m,A,Y,W];for(let C=1;C<W;C++)P[q+C]=void 0}}}}let T=x.map(m=>m>1?"N":0);a.find("td").each(function(m){const V=+s(this).attr("colspan")||1,U=T.findIndex(_=>_===0);for(let _=0;_<V;_++)T[U+_]=m+1});const Ft={};for(let m=0;m<P.length;m++){if(!P[m])continue;const[V,U,_,A]=P[m]||[],H=_-V-1;if(H<=0)continue;const F=s(l[V]).find("td")[U];s(F).attr("rowspan",_-H);const Y=s(F).clone().attr("rowspan",H),W="splitTd"+m;Ft[W]=Y;let q=T.findIndex(C=>C==="N");if(q!==-1)for(let C=0;C<A;C++)T[q+C]=W}const gt=a.clone().empty();[...new Set(T)].forEach(m=>{typeof m=="string"?gt.append(Ft[m]):gt.append(a.find("td").eq(m-1).clone())});const Bn=a.prev("tr").length===0;g.children("tbody").append(gt.clone()),g.children("tbody").append(a.nextAll().clone()),f.append(g),f.append(a.parents("table").nextAll().clone()),a.nextAll().remove(),a.parents("table").nextAll().remove(),Bn?a.parents("table").remove():a.remove()}else{a.nextAll().length?(g.prepend(a.parents("table").children("thead").clone()),g.children("tbody").append(a.nextAll().clone()),a.nextAll().remove(),f.append(g),f.append(a.parents("table").nextAll().clone()),a.parents("table").nextAll().remove()):(f.append(a.parents("table").nextAll().clone()),a.parents("table").nextAll().remove());let l=s(`<div style="height:${294*n-100}px;overflow:hidden;"></div>`);a.parents(".break-page").append(l),l.append(a.parents("table"))}}return{execPaging:r}}return vn});
